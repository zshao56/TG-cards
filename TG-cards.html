<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sashaçš„æ„Ÿæ©èŠ‚ç¥ç¦</title>
    <style>
        :root {
            --primary-color: #d35400; /* æ·±æ©™è‰² */
            --secondary-color: #e67e22; /* æ©™è‰² */
            --accent-color: #f1c40f; /* é‡‘è‰² */
            --text-color: #5d4037; /* æ·±æ£•è‰² */
            --bg-color: #fdf2e9; /* å¥¶æ²¹è‰²èƒŒæ™¯ */
            --card-bg: #ffffff;
            --shadow: 0 10px 30px rgba(93, 64, 55, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, #fff8f0 0%, #fae5d3 100%);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }

        /* ç§‹å¶é£˜è½åŠ¨ç”»å®¹å™¨ */
        #leaves-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .leaf {
            position: absolute;
            width: 20px;
            height: 20px;
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.6;
            animation: fall linear infinite;
        }

        /* è´ºå¡ä¸»ä½“ */
        .card-container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 600px;
            margin: 20px;
            perspective: 1000px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 2px solid rgba(211, 84, 0, 0.1);
            transition: transform 0.3s ease;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        /* å›¾ç‰‡åŒºåŸŸ */
        .card-image-wrapper {
            width: 100%;
            height: 350px;
            overflow: hidden;
            position: relative;
            background-color: #eee;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.5s ease;
        }

        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--primary-color);
            font-size: 14px;
        }

        /* å†…å®¹åŒºåŸŸ */
        .card-content {
            padding: 40px 30px;
            text-align: center;
        }

        .card-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            font-family: 'Georgia', serif;
            letter-spacing: 2px;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.1);
        }

        .card-text {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: #4e342e;
            min-height: 80px; /* é˜²æ­¢æ–‡å­—è·³åŠ¨ */
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
        }

        .divider {
            height: 1px;
            background: linear-gradient(to right, transparent, var(--accent-color), transparent);
            width: 80%;
            margin: 20px auto;
        }

        /* è½æ¬¾åŒºåŸŸ */
        .signature-block {
            margin-top: 30px;
            font-size: 0.95rem;
            color: #8d6e63;
        }

        .fixed-quote {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .signature-details {
            display: flex;
            justify-content: center;
            gap: 15px;
            font-family: monospace;
        }

        /* æŒ‰é’®æ§åˆ¶åŒº */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-refresh {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-refresh:hover {
            background-color: #a04000;
        }

        .btn-share {
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
        }

        .btn-share:hover {
            background-color: #fae5d3;
        }

        /* éŸ³ä¹æµ®åŠ¨æŒ‰é’® */
        .music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.3s;
            border: none;
        }
        
        .music-toggle.playing {
            animation: pulse 2s infinite;
        }

        .music-toggle:hover {
            transform: scale(1.1);
        }

        /* åŠ¨ç”»å…³é”®å¸§ */
        @keyframes fall {
            0% { transform: translate(0, -10%) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translate(100px, 100vh) rotate(360deg); opacity: 0; }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(211, 84, 0, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(211, 84, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 84, 0, 0); }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 600px) {
            .card-title { font-size: 2rem; }
            .card-image-wrapper { height: 250px; }
            .card-content { padding: 30px 20px; }
        }
    </style>
</head>
<body>

    <div id="leaves-container"></div>

    <div class="card-container">
        <div class="card">
            <div class="card-image-wrapper">
                <div class="loading-spinner">åŠ è½½ç¾å¥½ä¸­...</div>
                <img src="" alt="Thanksgiving" id="main-image" class="card-image">
            </div>

            <div class="card-content">
                <h1 class="card-title">Happy Thanksgiving</h1>
                
                <p id="greeting-text" class="card-text">
                    </p>

                <div class="divider"></div>

                <div class="signature-block">
                    <p class="fixed-quote">æ„¿æ„Ÿæ©ä¹‹å¿ƒå¸¸ä¼´å·¦å³</p>
                    <div class="signature-details">
                        <span>From: Sasha</span>
                        <span>|</span>
                        <span>2025.11.27</span>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-refresh" onclick="generateNewCard()">
                        <span>â†» æ¢ä¸€å¼ </span>
                    </button>
                    <button class="btn btn-share" onclick="shareCard()">
                        <span>ğŸ“¤ åˆ†äº«ç¥ç¦</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <button class="music-toggle" onclick="toggleMusic()" title="æ’­æ”¾/æš‚åœéŸ³ä¹">
        ğŸµ
    </button>
    <audio id="bg-music" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_1067527632.mp3?filename=autumn-leaves-123441.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 1. æ•°æ®å‡†å¤‡
        const greetings = [
            "æ„Ÿè°¢ç”Ÿå‘½ä¸­çš„æ¯ä¸€æ¬¡ç›¸é‡ï¼Œæ„¿ä½ çš„æ„Ÿæ©èŠ‚å……æ»¡æ¸©æš–ä¸å–œæ‚¦ã€‚",
            "åœ¨è¿™ä¸ªæ„Ÿæ©çš„å­£èŠ‚ï¼Œè¡·å¿ƒæ„Ÿè°¢ä½ å¸¦æ¥çš„ç¾å¥½æ—¶å…‰ã€‚",
            "æ„Ÿæ©æ‰€æœ‰çš„å…³æ€€ä¸é™ªä¼´ï¼Œç¥ä½ æ„Ÿæ©èŠ‚å¹¸ç¦æ»¡æ»¡ã€‚",
            "æ„¿ç«é¸¡çš„é¦™å‘³å……æ»¡ä½ çš„å®¶ï¼Œæ„¿å¹¸ç¦çš„ç¬‘å®¹æŒ‚åœ¨ä½ çš„è„¸åºã€‚",
            "æ„Ÿè°¢æœ‰ä½ ï¼Œè®©æˆ‘çš„ä¸–ç•Œå˜å¾—å¦‚æ­¤è‰²å½©æ–‘æ–“ã€‚æ„Ÿæ©èŠ‚å¿«ä¹ï¼",
            "ç”Ÿæ´»å› æ„Ÿæ©è€Œç¾å¥½ï¼Œå‹è°Šå› çœŸè¯šè€Œé•¿ä¹…ã€‚ç¥ä½ èŠ‚æ—¥å¿«ä¹ï¼",
            "æ„¿è¿™ä¸ªç§‹å¤©å¸¦ç»™ä½ ä¸°æ”¶çš„å–œæ‚¦ï¼Œæ„¿æ„Ÿæ©èŠ‚å¸¦ç»™ä½ å®¶äººçš„å›¢èšã€‚",
            "å¿ƒæ€€æ„Ÿæ©ï¼Œæ‰€é‡çš†æ¸©æŸ”ã€‚ç¥ä½ å’Œå®¶äººæ„Ÿæ©èŠ‚å®‰åº·ã€‚",
            "æ„Ÿè°¢å››å­£çš„é¦ˆèµ ï¼Œæ„Ÿè°¢ä½ çš„å­˜åœ¨ã€‚Sasha ç¥ä½ èŠ‚æ—¥å¿«ä¹ï¼",
            "æ„¿ä½ çš„ç”Ÿæ´»åƒå—ç“œæ´¾ä¸€æ ·ç”œç¾ï¼Œåƒç§‹å¶ä¸€æ ·ç»šçƒ‚ã€‚",
            "æ„Ÿæ©å²æœˆï¼Œæ„Ÿæ©æœ‰ä½ ã€‚æ„¿ç¾å¥½å¸¸ä¼´ä½ å·¦å³ã€‚",
            "åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæƒ³å¯¹ä½ è¯´å£°è°¢è°¢ï¼Œæ„Ÿè°¢ä½ ä¸€ç›´ä»¥æ¥çš„æ”¯æŒã€‚",
            "ä¸°æ”¶çš„å­£èŠ‚ï¼Œæ„Ÿæ©çš„å¿ƒã€‚æ„¿ä½ æ‹¥æœ‰ä¸€ä¸ªæ¸©é¦¨éš¾å¿˜çš„æ„Ÿæ©èŠ‚ã€‚",
            "å¸¸æ€€æ„Ÿæ©ä¹‹å¿ƒï¼Œå¹¸ç¦è‡ªä¼šé™ä¸´ã€‚ç¥ä½ ä»Šæ—¥å……æ»¡æ¬¢ç¬‘ã€‚",
            "æ„Ÿè°¢é˜³å…‰ã€é›¨éœ²ï¼Œå’Œæ¯ä¸€ä¸ªçˆ±æˆ‘ä»¬çš„äººã€‚æ„Ÿæ©èŠ‚å¿«ä¹ï¼",
            "æ„¿æ„Ÿæ©çš„çƒ›å…‰ç…§äº®ä½ å‰è¡Œçš„è·¯ï¼Œæ„¿æ¸©æš–å¸¸é©»å¿ƒé—´ã€‚",
            "ä¸€æ¯çƒ­èŒ¶ï¼Œä¸€ä»½ç¥ç¦ï¼Œæ„Ÿè°¢ä½ åœ¨æˆ‘ç”Ÿå‘½ä¸­å‡ºç°çš„æ¯ä¸€åˆ»ã€‚",
            "æ—¶å…‰é™å¥½ï¼Œæ„Ÿæ©ç›¸é‡ã€‚æ„¿ä½ æ‹¥æœ‰ä¸–é—´æ‰€æœ‰çš„ç¾å¥½ã€‚",
            "æ„Ÿæ©èŠ‚åˆ°äº†ï¼Œæ„¿ä½ çš„ç›˜å­é‡Œè£…æ»¡ç¾é£Ÿï¼Œå¿ƒé‡Œè£…æ»¡å¿«ä¹ã€‚",
            "æ— éœ€åä¸½çš„è¯­è¨€ï¼Œåªæœ‰ä¸€é¢—çœŸè¯šæ„Ÿæ©çš„å¿ƒã€‚ç¥ä½ å¹¸ç¦ï¼"
        ];

        // ä½¿ç”¨ Unsplash é«˜æ¸…å›¾ç‰‡é“¾æ¥
        const images = [
            "https://images.unsplash.com/photo-1510523035821-255d6447c286?auto=format&fit=crop&w=800&q=80", // ç§‹å¶ä¸ä¹¦
            "https://images.unsplash.com/photo-1509460598716-43bf6040778a?auto=format&fit=crop&w=800&q=80", // å—ç“œ
            "https://images.unsplash.com/photo-1543254756-c56d78775f0f?auto=format&fit=crop&w=800&q=80", // ä¸°æ”¶é¤æ¡Œ
            "https://images.unsplash.com/photo-1574787965005-4c07d3b0c53d?auto=format&fit=crop&w=800&q=80", // æ„Ÿæ©èŠ‚æ™šé¤
            "https://images.unsplash.com/photo-1477414348463-c0eb7f1359b6?auto=format&fit=crop&w=800&q=80", // ç§‹æ—¥æ£®æ—
            "https://images.unsplash.com/photo-1511854999923-a21237a34559?auto=format&fit=crop&w=800&q=80", // èœ¡çƒ›ä¸æ°›å›´
            "https://images.unsplash.com/photo-1569438061413-6497f620b727?auto=format&fit=crop&w=800&q=80", // æ´¾
            "https://images.unsplash.com/photo-1533230408703-0570fa3f68a5?auto=format&fit=crop&w=800&q=80", // è£…é¥°
            "https://images.unsplash.com/photo-1575494209867-a01c4025d57d?auto=format&fit=crop&w=800&q=80", // é‡‘è‰²éº¦ç”°
            "https://images.unsplash.com/photo-1512413914633-b5043f4041ea?auto=format&fit=crop&w=800&q=80", // çƒ­é¥®
            "https://images.unsplash.com/photo-1605218427368-3543666d6d45?auto=format&fit=crop&w=800&q=80", // æ„Ÿæ©èŠ‚å¸ƒç½®
            "https://images.unsplash.com/photo-1508264165352-258db2ebd59b?auto=format&fit=crop&w=800&q=80", // è½å¶ç‰¹å†™
            "https://images.unsplash.com/photo-1542363533-31f0f90e54d8?auto=format&fit=crop&w=800&q=80", // èˆ’é€‚çš„å®¶
            "https://images.unsplash.com/photo-1514338955140-5e354924a4d6?auto=format&fit=crop&w=800&q=80", // ä¸°ç››æ™šé¤
            "https://images.unsplash.com/photo-1510019280145-8c03551525b6?auto=format&fit=crop&w=800&q=80"  // ç§‹æ—¥é˜³å…‰
        ];

        // 2. æ ¸å¿ƒé€»è¾‘åŠŸèƒ½
        function generateNewCard() {
            const imgElement = document.getElementById('main-image');
            const textElement = document.getElementById('greeting-text');

            // ç§»é™¤æ—§åŠ¨ç”»ç±»ä»¥é‡ç½®
            textElement.classList.remove('fade-in');
            imgElement.style.opacity = '0.5';

            // éšæœºé€‰æ‹©
            const randomMsg = greetings[Math.floor(Math.random() * greetings.length)];
            const randomImg = images[Math.floor(Math.random() * images.length)];

            // å»¶è¿Ÿä¸€ç‚¹ä»¥å±•ç¤ºè¿‡æ¸¡æ•ˆæœ
            setTimeout(() => {
                textElement.innerText = randomMsg;
                textElement.classList.add('fade-in');
                
                // å›¾ç‰‡åŠ è½½å¤„ç†
                const tempImg = new Image();
                tempImg.src = randomImg;
                tempImg.onload = () => {
                    imgElement.src = randomImg;
                    imgElement.style.opacity = '1';
                };
            }, 200);
        }

        // 3. è½å¶ç‰¹æ•ˆ
        function createLeaves() {
            const container = document.getElementById('leaves-container');
            const leafColors = ['#d35400', '#f39c12', '#c0392b', '#e67e22'];
            
            setInterval(() => {
                const leaf = document.createElement('div');
                leaf.classList.add('leaf');
                
                // éšæœºæ ·å¼
                const startLeft = Math.random() * 100;
                const duration = Math.random() * 5 + 5; // 5-10ç§’
                const size = Math.random() * 15 + 10; // 10-25px
                const color = leafColors[Math.floor(Math.random() * leafColors.length)];
                
                // SVG æ«å¶å½¢çŠ¶
                leaf.style.left = startLeft + '%';
                leaf.style.animationDuration = duration + 's';
                leaf.style.width = size + 'px';
                leaf.style.height = size + 'px';
                
                // ä½¿ç”¨maskæˆ–è€…ç›´æ¥èƒŒæ™¯è‰²æ¨¡æ‹Ÿå¶å­ï¼Œè¿™é‡Œç®€å•ç”¨èƒŒæ™¯è‰²+åœ†è§’æ¨¡æ‹Ÿ
                leaf.style.backgroundColor = color;
                leaf.style.borderRadius = '50% 0 50% 0';
                
                container.appendChild(leaf);

                // åŠ¨ç”»ç»“æŸåç§»é™¤
                setTimeout(() => {
                    leaf.remove();
                }, duration * 1000);
            }, 800); // æ¯0.8ç§’ç”Ÿæˆä¸€ç‰‡
        }

        // 4. éŸ³ä¹æ§åˆ¶
        let isPlaying = false;
        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            const btn = document.querySelector('.music-toggle');
            
            if (isPlaying) {
                audio.pause();
                btn.classList.remove('playing');
                btn.innerText = 'ğŸµ';
                btn.title = "æ’­æ”¾éŸ³ä¹";
            } else {
                audio.play().catch(e => alert("è¯·ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ä»¥å…è®¸æ’­æ”¾éŸ³ä¹"));
                btn.classList.add('playing');
                btn.innerText = 'â¸';
                btn.title = "æš‚åœéŸ³ä¹";
            }
            isPlaying = !isPlaying;
        }

        // 5. åˆ†äº«åŠŸèƒ½
        function shareCard() {
            const greeting = document.getElementById('greeting-text').innerText;
            const shareText = `Sasha å‘æ¥ä¸€å¼ æ„Ÿæ©èŠ‚è´ºå¡ï¼š\n"${greeting}"\nç¥ä½ æ„Ÿæ©èŠ‚å¿«ä¹ï¼`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Sashaçš„æ„Ÿæ©èŠ‚ç¥ç¦',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // é™çº§å¤„ç†ï¼šå¤åˆ¶åˆ°å‰ªè´´æ¿
                const dummy = document.createElement('textarea');
                document.body.appendChild(dummy);
                dummy.value = shareText + " " + window.location.href;
                dummy.select();
                document.execCommand('copy');
                document.body.removeChild(dummy);
                alert('ç¥ç¦è¯­å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¿«å»å‘é€ç»™æœ‹å‹å§ï¼');
            }
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            generateNewCard();
            createLeaves();
        };

    </script>
</body>
</html>
